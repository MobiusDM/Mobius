import"../chunks/DsnmJJEf.js";import{i as Te}from"../chunks/BHBMhBqS.js";import{o as Ve,s as v}from"../chunks/BquZJqp6.js";import{p as We,b as je,q as f,t as w,v as t,f as h,w as s,x as a,y as e,a as m,z as $,A as Je,B as ge,C as Ke,n as K,D as Qe}from"../chunks/BYUYUiqq.js";import{i as F}from"../chunks/G_-t5tJM.js";import{a as Q,C as X,e as xe,i as ye}from"../chunks/D3_zJ7M8.js";import{c as Xe}from"../chunks/D7v9pv8V.js";import{s as be,c as Ye,a as Ze}from"../chunks/Bt7aw1iI.js";import{L as es,M as we,S as ss,P as ts,U as as,C as is,a as vs}from"../chunks/JSvPO1vg.js";var ls=h('<div><span class="status-dot svelte-1167m8"></span> </div>'),ds=h('<div class="loading svelte-1167m8"><div class="spinner svelte-1167m8"></div> <p>Loading dashboard...</p></div>'),rs=h('<div class="error svelte-1167m8"><!> <p class="svelte-1167m8"> </p> <button class="btn btn-primary svelte-1167m8">Retry</button></div>'),ns=h('<p class="text-sm text-gray-500 svelte-1167m8"> </p>'),cs=h('<div class="license-status svelte-1167m8"><h2 class="svelte-1167m8">License Status</h2> <div class="license-card svelte-1167m8"><div class="license-info svelte-1167m8"><h3 class="svelte-1167m8"> </h3> <p class="svelte-1167m8"> </p> <!></div> <div class="license-progress svelte-1167m8"><div class="progress-bar svelte-1167m8"><div class="progress-fill svelte-1167m8"></div></div></div></div></div>'),os=h('<div class="device-item svelte-1167m8"><div class="device-info"><div class="device-name svelte-1167m8"> </div> <div class="device-details svelte-1167m8"> </div></div> <div class="device-status svelte-1167m8"><!> <span> </span></div></div>'),ms=h('<div class="activity-item svelte-1167m8"><div class="activity-icon svelte-1167m8"><!></div> <div class="activity-content"><div class="activity-message svelte-1167m8"> </div> <div class="activity-time svelte-1167m8"> </div></div></div>'),_s=h('<div class="stats-grid svelte-1167m8"><div class="stat-card svelte-1167m8"><div class="stat-content svelte-1167m8"><div class="stat-icon svelte-1167m8"><!></div> <div class="stat-details svelte-1167m8"><h3 class="svelte-1167m8">Total Devices</h3> <div class="stat-number svelte-1167m8"> </div></div></div> <div class="stat-breakdown svelte-1167m8"><span class="stat-item svelte-1167m8"><span class="stat-dot online svelte-1167m8"></span> </span> <span class="stat-item svelte-1167m8"><span class="stat-dot offline svelte-1167m8"></span> </span> <span class="stat-item svelte-1167m8"><span class="stat-dot pending svelte-1167m8"></span> </span></div></div> <div class="stat-card svelte-1167m8"><div class="stat-content svelte-1167m8"><div class="stat-icon svelte-1167m8"><!></div> <div class="stat-details svelte-1167m8"><h3 class="svelte-1167m8">Active Policies</h3> <div class="stat-number svelte-1167m8">12</div></div></div></div> <div class="stat-card svelte-1167m8"><div class="stat-content svelte-1167m8"><div class="stat-icon svelte-1167m8"><!></div> <div class="stat-details svelte-1167m8"><h3 class="svelte-1167m8">Applications</h3> <div class="stat-number svelte-1167m8">8</div></div></div></div> <div class="stat-card svelte-1167m8"><div class="stat-content svelte-1167m8"><div class="stat-icon svelte-1167m8"><!></div> <div class="stat-details svelte-1167m8"><h3 class="svelte-1167m8">Device Groups</h3> <div class="stat-number svelte-1167m8">5</div></div></div></div></div> <!> <div class="content-grid svelte-1167m8"><div class="content-card svelte-1167m8"><div class="card-header svelte-1167m8"><h2 class="svelte-1167m8">Recent Devices</h2> <a href="/devices" class="link svelte-1167m8">View all</a></div> <div class="device-list svelte-1167m8"></div></div> <div class="content-card svelte-1167m8"><div class="card-header svelte-1167m8"><h2 class="svelte-1167m8">Recent Activity</h2></div> <div class="activity-list svelte-1167m8"></div></div></div>',1),ps=h('<div class="dashboard svelte-1167m8"><div class="dashboard-header svelte-1167m8"><div><h1 class="svelte-1167m8">Dashboard</h1> <p class="svelte-1167m8">Overview of your Mobius MDM environment</p></div> <!></div> <!></div>');function Ds($e,De){We(De,!1);let I=w(!0),E=w(null),k=w([]),M=w({total:0,online:0,offline:0,pending:0}),d=w(null),G=w(null),Y=w([]);Ve(async()=>{await Z()});async function Z(){f(I,!0),f(E,null);try{const[r,se,A]=await Promise.all([Q.getDevices({limit:10}),Q.getLicenseStatus(),Q.getHealth()]);f(k,r.devices),f(d,se),f(G,A),f(M,{total:r.total,online:t(k).filter(_=>_.status==="online").length,offline:t(k).filter(_=>_.status==="offline").length,pending:t(k).filter(_=>_.status==="pending").length}),f(Y,[{type:"device_enrolled",message:'New device "MacBook-Pro-15" enrolled',time:"2 minutes ago"},{type:"policy_applied",message:"Security policy applied to 5 devices",time:"15 minutes ago"},{type:"application_installed",message:"Chrome browser installed on 3 devices",time:"1 hour ago"},{type:"device_offline",message:'Device "Windows-Laptop-01" went offline',time:"2 hours ago"}])}catch(r){console.error("Failed to load dashboard data:",r),f(E,"Failed to load dashboard data. Please try again.")}finally{f(I,!1)}}function ee(r){switch(r){case"online":return"text-green-600";case"offline":return"text-red-600";case"pending":return"text-yellow-600";default:return"text-gray-600"}}function Se(r){switch(r){case"online":return vs;case"offline":return is;case"pending":return X;default:return X}}Te(),es($e,{children:(r,se)=>{var A=ps(),_=s(A),Ce=a(s(_),2);{var ze=n=>{var p=ls(),N=a(s(p));e(p),$(()=>{be(p,1,`health-indicator ${t(G).status??""}`,"svelte-1167m8"),v(N,` System ${t(G).status??""}`)}),m(n,p)};F(Ce,n=>{t(G)&&n(ze)})}e(_);var Le=a(_,2);{var Pe=n=>{var p=ds();m(n,p)},ke=n=>{var p=Je(),N=ge(p);{var Me=D=>{var S=rs(),C=s(S);X(C,{size:24});var g=a(C,2),R=s(g,!0);e(g);var O=a(g,2);e(S),$(()=>v(R,t(E))),Ke("click",O,Z),m(D,S)},Ae=D=>{var S=_s(),C=ge(S),g=s(C),R=s(g),O=s(R),Re=s(O);we(Re,{size:24}),e(O);var te=a(O,2),ae=a(s(te),2),Oe=s(ae,!0);e(ae),e(te),e(R);var ie=a(R,2),T=s(ie),Ue=a(s(T));e(T);var V=a(T,2),qe=a(s(V));e(V);var ve=a(V,2),Be=a(s(ve));e(ve),e(ie),e(g);var W=a(g,2),le=s(W),de=s(le),Fe=s(de);ss(Fe,{size:24}),e(de),K(2),e(le),e(W);var j=a(W,2),re=s(j),ne=s(re),Ee=s(ne);ts(Ee,{size:24}),e(ne),K(2),e(re),e(j);var ce=a(j,2),oe=s(ce),me=s(oe),Ge=s(me);as(Ge,{size:24}),e(me),K(2),e(oe),e(ce),e(C);var _e=a(C,2);{var He=x=>{var i=cs(),c=a(s(i),2),l=s(c),u=s(l),z=s(u);e(u);var o=a(u,2),U=s(o);e(o);var y=a(o,2);{var L=b=>{var B=ns(),Ie=s(B);e(B),$(Ne=>v(Ie,`Expires: ${Ne??""}`),[()=>new Date(t(d).expires_at).toLocaleDateString()]),m(b,B)};F(y,b=>{t(d).expires_at&&b(L)})}e(l);var P=a(l,2),H=s(P),q=s(H);e(H),e(P),e(c),e(i),$(b=>{v(z,`${b??""} License`),v(U,`${t(d).devices_enrolled??""} / ${t(d).devices_limit??""} devices enrolled`),Ze(q,`width: ${t(d).devices_enrolled/t(d).devices_limit*100}%`)},[()=>t(d).tier.charAt(0).toUpperCase()+t(d).tier.slice(1)]),m(x,i)};F(_e,x=>{t(d)&&x(He)})}var pe=a(_e,2),J=s(pe),ue=a(s(J),2);xe(ue,5,()=>t(k).slice(0,5),ye,(x,i)=>{var c=os(),l=s(c),u=s(l),z=s(u,!0);e(u);var o=a(u,2),U=s(o);e(o),e(l);var y=a(l,2),L=s(y);{let q=Qe(()=>ee(t(i).status));Xe(L,()=>Se(t(i).status),(b,B)=>{B(b,{size:16,get class(){return t(q)}})})}var P=a(L,2),H=s(P,!0);e(P),e(y),e(c),$(q=>{v(z,t(i).hostname),v(U,`${t(i).platform??""} â€¢ ${t(i).os_version??""}`),be(P,1,q,"svelte-1167m8"),v(H,t(i).status)},[()=>Ye(ee(t(i).status))]),m(x,c)}),e(ue),e(J);var fe=a(J,2),he=a(s(fe),2);xe(he,5,()=>t(Y),ye,(x,i)=>{var c=ms(),l=s(c),u=s(l);we(u,{size:16}),e(l);var z=a(l,2),o=s(z),U=s(o,!0);e(o);var y=a(o,2),L=s(y,!0);e(y),e(z),e(c),$(()=>{v(U,t(i).message),v(L,t(i).time)}),m(x,c)}),e(he),e(fe),e(pe),$(()=>{v(Oe,t(M).total),v(Ue,` ${t(M).online??""} Online`),v(qe,` ${t(M).offline??""} Offline`),v(Be,` ${t(M).pending??""} Pending`)}),m(D,S)};F(N,D=>{t(E)?D(Me):D(Ae,!1)},!0)}m(n,p)};F(Le,n=>{t(I)?n(Pe):n(ke,!1)})}e(A),m(r,A)},$$slots:{default:!0}}),je()}export{Ds as component};
